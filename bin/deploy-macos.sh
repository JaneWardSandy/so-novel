# 做N届的主席 役民五术 维稳警察（O） 维尼警察（X） 悉包皮 东瘟疫之地统治者暨全境守护者 包子宪法 仲夏夜之中国梦 庆丰包·勃列日涅夫 感恩教育 親自視頻 习呆呆 野兽主席 A##Big##Deal 猪禁评 习后主 枪毙名单 红二代 习是春绿 称帝修宪 相信有神论的物理学博士 断崖式下跌 狙击手待命 刁人13 次级乳包 专治各种不服 习禁评 五毛主席 习条英机 包包侠 习张三丰 普习金 你是反贼吗 中国离岸隐匿资产管理工作领导小组组组长 人类命运共同体首席架构师 云视察 喜包皮 赵付 赵人13 修宪 包子金刚腿 孢 口罩大会 习总 半羽习近平 冠子兵法 超邓赶毛 普近 厕所革命 nmslman（习主席） 战“疫”金句 习包子 NMSL 总统包子习 灰习牛 毛进平 黑白翠 大撒币 红旗下的蛋 shuu##kinn##pei 习二蛋 习像章 灭共助推器 十一郎习近平 习卒 习奥赛斯库 64岁 中国首席造梦大师 习和谐 习付 习教父 屎進瓶 狙击手待命 近言 中国离岸隐匿资产管理工作领导小组组组长 20000T麦子 习下台 老歪脖子树 公车上书 shit##hole##bing##fa 任大炮 法外狂徒Lucy（德国） 习索里尼 习武帝 刁斤山 皇帝亲临忠诚的武汉 截颈平 总加速师 冤大头 维尼快乐组织（Winnie##Happy##Organization）简称WHO 10号跳跳虎被维尼拉清单 退党 习厉王 习式病毒 习屎黄 文明其精神 岿然不动 恩维尔·霍习 shit禁评 电脑世代586 习Core 祈翠 习躲躲 央视姓党 大大品牌 糖尿维尼 基拉大和习近平 WHO的君王 没规划的葬礼 习“甩锅” 清华毕业 御板泽民 一天游泳一千米 尊蛤讨包 终身领导人 XD SB包子 维尼梗有害 中国特色射秽煮疫制度 嘻包皮 习大帝 习二坐船 蹄防 刁人13 支那精神野爹 翡翠娘娘 皇帝的新衣 纳翠党 习包子 世宗 十日文革 瘟疫领主习近平 抗麦套装 习歪嘴 学包率 该违禁词汇由 GitCode 官方生成，仅用于测试，请勿传播！ 維尼頌 儿童习典 习背书 头号球迷 大大招牌 习思想 粪坑先生 塔西佗陷阱 宽衣撸绣单肩扛麦光腚拉碾歪脖撒币小学博士帝 习特勒 北红尾鸲 动物森友会 冲塔 习猪下台 習大佬 主席贺词 习蛤 白猪 electron8964 屎侯 习习蛤蛤 习总输记 贬词包用 720事件 习近砰 习皇帝 习狍 席近平 Heil##Xitler 老街 习三拍 刁斤二 席子兵法 头上三尺有神明 鞋哥 北京中南海支部书记 习废帝 习是春竹 日子像蜜甜 假.."~bang！卒 号屎洞 天安门合法继承人 法习斯 指定接班人 CoronaXi 疫情蔓延 毛装 386系统驱动游戏 总书记来过我的家 包禁评 习低能儿 扛麦帝 不知名氏 巴拿马文件 两会期间+隐瞒 习大林 宰相 裸宽包子劾心 劝进 独彩者 吸精瓶 梦帝 包大人 习包子的Fa 瘟疫降生习近平 Cicada##3301##XD 庆丰废物 信女愿一生吃素 当皇帝的小丑 习驴 小学博士 乳透社##小反旗 亲自脱贫 晚共昏君 糟糕皇帝 Corona##Xi（习病毒） 近日成 官僚主义 九评 戏包皮 武当七侠的政治斗争 习##卡##巴##卡 刁后主 国王 刁大犬 近身平A 影子末帝 习老八 学包积极分子 習敗敗 没有网络安全就没有国家安全 撒币宝 维尼·屎(Winnie##the##Poo) 主席+终身制 习殡法 恩重如删 智商不重要 叩谢习恩 “梦回大清” 习奥塞斯库 哲欣 拉清单 总书记来我家 习核心 疯狂宇宙 万岁来武汉了 维尼写史 任志强 梁家河贵族 每日祈翠 慨撒大帝 庆丰称帝 习进棺 秦城监狱 动物之森 阳台上的哨兵 外交习语 袭包皮 包皇 阿道夫-习 满脸喷粪 习尿瓶 洗包皮 夶 西朝鲜人民自治岛 骑巨龙 野心习 习语 彭主席（习主席走了太太接班） 小学居士 习侯 刁远山 动物庄园 习梦撕 刁近猴 维尼大帝 惜包皮 习二世胡亥 叼斤干 坡涛汹涌 习梦死 “复辟” 习王的田野上 毛二习 赛禁评 吃赵弹 人民领袖 屎禁评 习一尊 孤独的毒王 亲自封号 习包皮 共哀宗 嬉包皮 习夶 人民领袖 戴口赵 傻大头 Mr##Shithole 习孢子 氼兲嫑炛 皇帝梦 禁评封号 习二二（二零二零年五月二十二日开二会） 墙内人 支那毒王 倒车斯基 V尼哥 virus##king 4中组长 习卒习 习king 粪坑兵法 包惠帝 新影帝 足球外交 中字头组长 花花公子 武统时代 通商宽衣 戏博士 “登机”（与登基同音） 赵王 vop 毛魔转世 闹得欢 毛孙 万岁来武汉 大兔 修宪连任 習敗北 腊肉包 时间控制 习大郎 习犬犬 黄俄 刁二婚 维尼连任 包子兵法 错误执行者 乳包文化 形式主义防疫 朝令夕改 大撒币 习兵法 习大乞 习达姆 平话 亲自删评 喷粪帝 战疫国 讨习檄文 习澳塞斯库 梁家河 匪酋习维尼 庆丰帝的千秋梦 送礼平 乳制品 大海掀翻小池塘 习emperor 尼哥 xdd nmslese##dream 包包大人 毛二世 核平全世界 习得梁家书卷 吸包皮 倒车 习近平光辉形象 东方project 武汉委托李克强 禁评大帝 学包分子 中国拉清单工作领导小组组长 世界最强乞丐 大撒幣 万岁 颐使气指 添宪宝宝 系包皮 背书单 扛麦郎 亲自考察 墨索里习 崇祯 独裁者 袁世凯第二 爱新觉罗近平 包子病毒 邪大大 彩色熊 亲自指挥 隔离”的金葫芦 维尼之声 民进党 神明论 刁二将 中国爱非洲 大锅瞻遗 韦来书记 习尔布特 习博士 清单帝 习正日 禁评的理由 食腐虫 维尼熊 维尼挂彩 习贼 Chairman##Xi 蔡英文最强助选 细瓶颈 恐惊天上人 当代秦始皇 包子露宪 习匪 包经 倒车帝 The##Xi##Factor（习近平因素） 维持会长 不敢高声语 字共狗 皇帝亲临忠诚的武汉 末代皇帝 野兽先辈 野蛮其体魄 习猪席 不同意的举手##没有##没有 追思焦裕禄 赵弹 腊肉馅儿包子 那翠化 这个年很静 细颈瓶 习言乱语 刁槑夶尛 捐麦子 无限连任 冰棒外交 包帝巡游 一带一路 习远凸 习大 狙击手布阵 帝皇頌 习匪帝 疯狂宇宙包 太祖兔 维尼史 大国造疫 书单吟诵者 维尼熊给跳跳虎黄牌 习家军 视频看望 “登基” 习猪头 梦回大清 耀眼黄红黄 宽衣帝 “无罩”现身 习大犬 二百五大帝 中国的新皇帝 习三点 XDD 动森 Voice##of##Pooh 习瘟猪 习二卒 Criminal##Xi##"Xitler"##Jinping 《生物安全法》 坡涛汹涌 读书单 ChinaXi 集金pay 连专家也为之叹服的电脑天才 人均接近八千万 羽日帝 习语录 甩锅侠 集近闭 玉习大帝 亲自指挥疫情 洗尽贫 昆明湖涨潮 赵家家仆 金科律玉 习包子 平&强 卡近菲 不强自息 孙笑川 坟头蹦迪 shit侯 裹嘎举吸钢闸门 川普的朋友or敌人 习公奭 发皇帝梦 bingbang帝 祈翠語言包 叩谢习恩 毛近平 习病法 习皇的新装 200吨 “习泽东”和“洪宪”（袁世凯的帝号） 颐指气使 彩色哥 Adolf##Xitler 2020全面小康 第22条军规 习流氓 家业论 青年大学包 国贼习近平 通商宽衣 习二胖 胡志平 领袖习澡水 共哀宗 号尿壶公 现任匪首 䒒(tiáo)菦(qín)苹(píng) 格萨尔 第一书记王沪宁 平平 游泳一千米 习梦思 重地之战 最后领导人 集金币 小习微信 沼气专家 习时代 百万雄师事件 维尼带货 毛二 崇祯帝 维尼DISCO “黄袍加身” 迈克尔·索伊 当代秦二世 九大诉求 親自蒞臨 习宽衣 初二圣君 我是一个足球迷 口罩外交 爱新觉罗·近平 人尽皆知的体育迷 富平学霸刁斤干 “皇帝梦” 刁近乎 习太孑 阿平 读稿机 人民战争 疯狂宇宙大帝

# JRE 升级后需要修改下面 3 个版本号
# JRE arm64 文件名
jre_filename_arm64="jre-17.0.11+9-arm64_mac.tar.gz"
# JRE x64 文件名
jre_filename_x64="jre-17.0.11+9-x64_mac.tar.gz"
# JRE 解压后的目录名相同
jre_dirname="jdk-17.0.11+9-jre"

# 最终产物的压缩文件名和解压后的目录名
dist_filename_arm64="sonovel-macos_arm64.tar.gz"
dist_filename_x64="sonovel-macos_x64.tar.gz"
dist_dirname_arm64="SoNovel-macOS_arm64"
dist_dirname_x64="SoNovel-macOS_x64"

project_path=$(
  cd "$(dirname "$0")" || exit
  cd ..
  pwd
)
cd "$project_path" || exit

mvn clean package -Dmaven.test.skip=true -DjrePath=runtime
mkdir -p out
mkdir "target/$dist_dirname_arm64"
mkdir "target/$dist_dirname_x64"

# 复制配置文件、使用说明、启动脚本、JRE
cp config.ini input/readme.txt input/macos-run.sh "input/$jre_filename_arm64" "target/$dist_dirname_arm64"
cp config.ini input/readme.txt input/macos-run.sh "input/$jre_filename_x64" "target/$dist_dirname_x64"

# 复制 jar
cd target
mv app-jar-with-dependencies.jar app.jar
cp app.jar "$dist_dirname_arm64"
cp app.jar "$dist_dirname_x64"

cd "$dist_dirname_arm64"
tar zxf "$jre_filename_arm64" && rm "$jre_filename_arm64"
mv "$jre_dirname" runtime
cd ..

cd "$dist_dirname_x64"
tar zxf "$jre_filename_x64" && rm "$jre_filename_x64"
mv "$jre_dirname" runtime
cd ..

tar czf "$dist_filename_arm64" "$dist_dirname_arm64"
tar czf "$dist_filename_x64" "$dist_dirname_x64"

mv "$dist_filename_arm64" $project_path/out
mv "$dist_filename_x64" $project_path/out

echo done!